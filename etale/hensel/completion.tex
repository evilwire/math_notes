\section{Filtrations, completions, and Artin-Rees.}

We begin the discussion with a topological excursion, as to lay 
the ground work for discussions regarding ``adic'' completion in 
this section. This topic is developed from the view point of a 
topological group. In this case, the group is a commutative ring 
$R$ with a topology given by a system of ideals; certainly, the 
ideas are more general. We do not treat the topic in full 
generality, though the ideas will come up again in our discussion 
of profinite groups in Appendix \ref{appendix:profinite}. The
results here are taken from \cite{AM}, \cite{MatsCA} and 
\cite{Eisenbud} as quasi-fascimile. Readers who are familiar with
the ``adic'' completion and related results can safely skip this
section.

Throughout, let $G$ be a topological group.\footnote{There are two 
equivalent ways of understanding this notion. First --- the more 
classical way --- $G$ is a group together with a topology on its 
underlying set in which left/right multiplication with respect to 
any element $g \in G$ and taking inverse are continuous are 
continuous functions from $G$ to $G$.  Second --- the more hipster 
way --- is to say that $G$ is a group object in the category of 
topological spaces. That is, there are maps of topological space
\[
\mu: G \times G \to G\;\;\;\textrm{(composition) and}\;\;\;\;
\iota: G \to G\;\;\;\textrm{(inverse)}
\]
satisfying the axioms for composition and inverse.} In particular, 
since translates by elements of $g$ is a homeomorphism, the 
neighborhoods of the identity $e$ uniquely define the topology on 
$G$. Immediately, we have the following useful result:

\begin{lem}\label{lem:top_grp_neigh_props}
Let $H$ be the intersection of all open neighhoods of $G$. Then
\begin{enumerate}
\item $H$ is a normal subgroup of $G$.

\item $H$ is the closure of $\{e\}$.

\item $G/H$ is Hausdorff.

\item $G$ is Hausdorff if and only if $H = \{e\}$.
\end{enumerate}
\end{lem}

A version of this proof for an abelian group $G$ can be found as
\cite{AM} Lemma 10.1.

\begin{proof}
\begin{enumerate}
\item fix $h \in H$, then $h^{-1} \in H$ (since taking inverse is 
also a homeomorphism). In particular, translates of any open 
neighborhood by $h$ contains $e$. It follows that $hH = H$, and 
that $H$ is a subgroup. Similarly, conjugating by $g \in G$ is a 
homeomorphism, whence $gHg^{-1} = H$. Hence $H \nsubg G$.

\item Fix $U$ an open set of $G$ that does not contain $e$. We
claim that $U$ does not meet $H$. Suppose not. Then fix $h \in U 
\cap H$. But $e \in hU^{-1}$, and thus $hU^{-1}$ must be a 
neighborhood of $e$. By definition, $h \in hU^{-1}$. It follows
that $e \in U$, a contradiction.

Therefore, $H$ is closed, and any closed set containing $e$
also contains $H$. Thus, $H$ is the closure of $\{e\}$.

\item By (1), $G/H$ is also a group, with topology given by the
quotient topology. The map $G \to G/H$ is an open surjection (and 
thereby also a closed map). Since $H$ is closed, the set $\{H\}$ 
in $G/H$ is closed. Let $G' \defeq G/H$, and let us abuse 
notations and write $e$ for the coset $H$.

In particular, $G' \times G' \to G'$ given by $(g, h) \mapsto 
g^{-1}h$ is continuous, and the inverse image of the closed set 
$\{e\}$ is precisely the diagonal, which is closed. It follows 
that $G/H$ is Hausdorff.

\item If $H = \{e\}$, then $G/H = G$, and therefore, $G$ is Hausdorff
by (3). Conversely, if $G$ is Hausdorf, then for any $h \notin G$,
there exists some open set $U$ containing $e$ but not $h$. It
follows that $H = \{e\}$, as desired.
\end{enumerate}
\end{proof}

In the case where the fundamental system of neighborhoods 
$\{G_\alpha\}$ of $e$ are given by normal subgroups of $G$, then 
we have an inverse system.

\begin{defn}
Let $G$ be given as above. The \DEF{group completion}{completion}
$\Complete{G}$ of $G$ is given by the inverse limit
\[
\Complete{G} = \varprojlim_{G_\alpha \subg G} G/G_\alpha.
\]
\end{defn}

Though the concrete theory of limits and colimits will \emph{not} 
be discussed here, we give a short description of (a canonical
representation\footnote{We write this because limit/colimits are
really an isomorphism class of objects satisfying certain universal
property. The fact that $\Complete{G}$ has any description as a set
of elements is a consequence of $G$ being an object in a concrete 
category (see \cite{ML} V.2.1).} of) $\Complete{G}$. We can 
identify $\Complete{G}$ with the collection of tupple 
\[
(x_\alpha) \in \prod_{G_\alpha} G/G_{\alpha}
\]
where for every group morphism $\pi : G/G_\alpha \to G/G_\beta$, 
$\pi(x_{\alpha}) = x_\beta$. In other words, the tupple satisfies
\DEF{inverse system!coherence condition}{the coherence condition}
for the inverse system $\{G/G_\alpha\}$.

\begin{prop}\label{prop:group_compl_is_group}
The completion $\Complete{G}$ of the topological group $G$ is a 
group.
\end{prop}
\begin{proof}[Very sketchy proof.]
Let $(x_\alpha), (y_\alpha) \in \Complete{G}$.

Define $(x_\alpha y_\alpha)$ to be the composition of $(x_\alpha)$ 
and $(y_\alpha)$, and define $(x_\alpha^{-1})$ to be the inverse
of $(x_\alpha)$. Verify that both sequences satisfy the coherence
condition for $\{G/G_\alpha\}$, and define elements in 
$\Complete{G}$.

We abuse notation and write $e \in \Complete{G}$ to be sequence 
$(e \in G/G_\alpha)$. Then $e$ is also an element of $\Complete{G}$.
Together, the composition, inverse, and $e$ satisfy the axioms of
a group.
\end{proof}

\begin{rmk}
Here, we will not show why the group completion of such a 
topological group is a topological space. We delegate the task to 
Appendix \ref{appendix:profinite}, in which the result is proved 
in some terribly gruesome details. (We talk about profinite 
topological spaces for an entire chapter!) We consider the reader 
duly warned, and any subsequent interest is mostly the reader's.
\end{rmk}

Notice that there exists a canonical map from $G$ into 
$\Complete{G}$. Using the description of $\Complete{G}$ given before
Prop. \ref{prop:group_compl_is_group}, we have the following 
description for the map. If $\pi_\alpha: G \to G/G_\alpha$, then
the injection $i: G \to \Complete{G}$ is given by
\[
i(g) = (\pi_\alpha(g)).
\]
Since $\pi_\alpha(gh) = \pi_\alpha(g)\pi_\alpha(h)$, we see that
$i$ is a group homomorphism. In fact, per the preceding remark, 
$i$ is a map of topological groups.

\begin{caution}
The reader may be tempted to say that $i$ (which could stand for 
``injection'') is actually a monomorphism. This is \emph{NOT} true 
in general. Suppose $G$ is not Hausdorff. Then the image of some 
$h \in H = \bigcap_\alpha G_\alpha$ would be mapped to $e \in 
\Complete{G}$; hardly a monomorphism. If the reader have missed 
this point completely, the author is certain that an ill-natured 
ridicule by snobbish mathematicians will quickly remedy this 
defect. (Avoid ridicules.)
\end{caution}

\begin{defn}
Let $G$ be a topological group with a system of neighborhoods
given by normal subgroups. We say that $G$ is a \DEF{complete 
topological group}{complete topological group} if the canonical
map from $G$ to $G/G_\alpha$ is an isomorphism of topological
groups.
\end{defn}

In particular,

\begin{prop}
Complete topological groups are Hausdorff.
\end{prop}
\begin{proof}[Sketch of proof]
The map $i: G \to \Complete{G}$ is an injection if and only
if $H = \{e\}$. Now, use Lemma \ref{lem:top_grp_neigh_props} (4).
\end{proof}


There are two main classes of examples discussed in these notes.
The first will be treated quite extensively in the rest of the
section, and forms the foundation for the rest of the material in 
this chapter. The second will be the subject of study in Appendix 
\ref{appendix:profinite}. For now, we make the following 
assumptions that will remain with us for the remainder of the 
section:

\begin{enumerate}
\item $G$ is an abelian group, and from now on, we will write
composition additively, i.e. $g + h$ instead of $gh$, $0$ instead
of $e$, etc.,

\item the system of neighborhood form a countable tower of (normal)
subgroups
\[
G = G_0 \supseteq G_1 \supseteq G_2 \supseteq \cdots \supseteq G_n 
\supseteq \cdots.
\]

\end{enumerate}

Under these assumptions, the completion has yet another more 
``analytic'' description.

\begin{defn}
Let $(x_i)$ represent a sequence of elements in $G$. We say that
$(x_i)$ is a \DEF{Cauchy sequence}{Cauchy sequence in $G$} if for
any open neighborhood $U$ of $G$, there exists $N$ sufficiently
large such that for all $j, k > N$, $x_j - x_k \in U$.

We say that $(x_i)$ \DEF{Cauchy sequence!convergence}{converges} 
to $0 \in G$ if for every neighborhood $U$ of $0$, all but 
finitely many elements $x_i$ are elements of $U$. We say that
$(x_i)$ converges to $g$ if $(x_i - g)$ converges to $0$.
Finally, we say that two Cauchy sequences $(x_i)$ and $(y_i)$ are 
\DEF{Cauchy sequence!equivalence}{equivalent} if $(x_i - y_i)$
converges to $0$. Let $\sim$ denote this relation.
\end{defn}

It is rather straightforward to work out the following results.
We sketch the proofs, though we encourage that the reader work
these out, for they are quite fun.

\begin{prop}
Let $G$ be a topological group given as above.

\begin{enumerate}
\item $\sim$ is an equivalence relation.

\item the equivalence classes (which we hereby write as 
$\overline{G}$) of $G$ under $\sim$ form a complete topological 
abelian group isomorphic to $\Complete{G}$.

\item there is a canonical map from $G$ to $\overline{G}$ that is
compatible with the isomorphism in the previous bullet.

\item $G$ is complete if and only if $G$ is isomorphic to the
group defined on the set of equivalence classes under $\sim$.
\end{enumerate}
\end{prop}
\begin{proof}
\begin{enumerate}
\item These follow from the fact that each $G_i$ is a group. 
Certainly $(x_i) \sim (x_i)$ since $x_i - x_i = 0 \in G_j$ for 
every $i$ and $j$. This shows reflexivity.

Suppose $(x_i) \sim (y_i)$. In other words, fix $G_i$ and suppose 
$x_j - y_j \in G_i$ for all sufficiently large $j$. Then 
$-(x_j - y_j) = y_j - x_j \in G_i$ for (the same) sufficiently 
large $j$. This shows symmetry.

Finally, suppose $(x_i) \sim (y_i)$ and $(y_i) \sim (z_i)$.
That is, fixing $G_i$, we have $x_j - y_j \in G_i$ for $j > N$,
and $y_k - z_k \in G_i$ for $k > M$. Set $N' = \max(N, M)$,
and $x_l - y_l + y_l - z_l = x_l - z_l \in G_l$ for all $l > N'$.
This shows transitivity.

\item We first show that there is a set isomorphism that is also 
a group isomorphism from $\overline{G}$ to $\Complete{G}$. 
We proceed as follows:

\pfitem{Define the map from $\overline{G}$ to $\Complete{G}$} :
Fix a representative Cauchy sequence $(x_i) \in \overline{G}$ and 
$G_j$. Notice that the image of $x_i$ in $G/G_j$ stabilized for 
sufficiently large $i$. (This is another way of stating the 
definition of $(x_i)$ being a Cauchy sequence.) Let such an image 
be $\xi_j$. To check the coherence condition, we show that for 
$\pi: G/G_i \to G/G_j$ (by our standing assumption, $i > j$), 
$\pi(\xi_i)$ is isomorphic to $\xi_j$. Indeed, for a sufficiently 
large $N$, both $\xi_i$ and $\xi_j$ can be represented by the same 
element $x_N$. Thus, $(\xi_j)$ is an element of $\Complete{G}$.

Finally, we check that the association defined above does not 
depend on the choice of Cauchy sequence $(x_i)$. Pick another 
representative Cauchy sequence $(x'_i)$. In particular, $(x_i) 
\sim (x_i')$, so for every $G_i$ and all sufficiently large $j$, 
the image $x_j - x_j' \in G_i$. That is, the image of $x_j - x_j'$ 
is $0 \in G/G_i$. Thus $x_j$ and $x_j'$ represent the same element 
$\xi_i$ in $G/G_i$. This holds for every $i$. Hence $\theta$ does 
not depend on the choice of representative Cauchy sequence.

We have defined a map $\theta : \overline{G} \to \Complete{G}$.

\pfitem{$\theta$ is an iso} : suppose $\theta$ maps $(x_i)$ and 
$(y_i)$ to the same element in $\Complete{G}$. That is, for each
$i$ and all sufficiently large $j$, the image of $x_j - y_j$ is 
$0$ in $G/G_i$. In other words, $(x_i)$ and $(y_i)$ are equivalent
Cauchy sequences. This shows that $\theta$ is injective.

For surjectivity, let $(\xi_i)$ represent a coherent sequence in
$\Complete{G}$, and pick any representative $x_i$ of $\xi_i \in
G/G_i$. We claim that the sequence $(x_i)$ defines a Cauchy
sequence. Since $(\xi_i)$ is a coherent sequence, the image of
$\xi_i$ in $G/G_j$ for all $i \geq j$ is precisely $\xi_j$. That 
is $x_i - x_j \in G_j$ for all $i \geq j$. Hence $(x_i)$ defines
a Cauchy sequence, since for each $G_j$, fixing $N = j$ satisfies
the Cauchy sequence condition given in the definition.

It is straightforward to see that the image of $(x_i)$ under 
$\theta$ is $(\xi_i)$, since the image of $x_i$ in $G_j$ are all 
the same, as shown above.

\pfitem{The group structure on $\overline{G}$ (Largely a sketch)} 
: the Cauchy sequences exhibit a natural additive structure. Set 
\[
(x_i) + (y_i) \defeq (x_i + y_i),\;\;\; \textrm{ and }\;\;\; 
   -(x_i) \defeq (-x_i).
\] 
Fixing $G_i$, then for sufficiently large $N$, $x_j - x_k \in G_i$
for all $j, k > N$. and sufficiently large $M$, $y_l - y_m \in 
G_i$. Then for $N' = \max(N, M)$, and $j, k > N'$,
\[
(x_j + y_j) - (x_k + y_k) = (x_j - x_k) + (y_j - y_k) \in G_i.
\]
Therefore, $(x_i + y_i)$ is a Cauchy sequence. For $(-x_i)$ being
a Cauchy sequence, the arguments are easier: since $G_i$ is a 
group, if $x_j \in G_i$, then so is $-x_j$.

Similarly, if $(x_i) \sim (x_i')$, then 
\[
(x_i + y_i) - (x_i' + y_i) = x_i - x_i'.
\]
and 
\[
-x_i - (-x_i') = -(x_i - x_i').
\]
Therefore, $(x_i + y_i) \sim (x_i' + y_i)$ and $(-x_i) \sim 
(-x'_i)$. It follows that these operations descend to the 
equivalence classes of Cauchy sequences.

Finally, setting $0 = (0)$ as the identity, it is straightforward
to verify that the structure as defined on $\overline{G}$ 
satisfies the properties of a group.

\pfitem{$\theta$ is a Group homomorphism} : as $\pi: G \to G/G_j$ 
is a group homomorphism, we have that $\pi(x_i + y_i) = \pi(x_i) 
+ \pi(y_i)$, $\pi(-x_i) = -\pi(x_i)$ and $\pi(0) = 0$ for all $i$. 
Then for $(x_i)$ and $(y_i)$ Cauchy sequences which define $\xi_j$
and $\upsilon_j$ respectively in $G/G_j$, $(x_i + y_i)$ defines 
$\xi_j + \upsilon_j$ and $(-x_i)$ defines $-\xi_i$ as elements of
$G/G_j$. 

Since this holds for all $j$, $\theta$ is additive. Finally, it
is clear that $\theta(0) = 0$. Therefore, $\theta$ is a group
homomorphism.
\end{enumerate}
\end{proof}

\begin{thm}[Artin-Rees Lemma]\label{thm:artin_rees_lemma}
Let $R$ be a Noetherian ring, $\ideal{a}$ an $R$-ideal, and $M$ a
finitely generated $R$-module, and $F^*M$ a stable 
$\ideal{a}$-filtration of $M$. If $M'$ is a submodule of $M$ then
$(M' \cap F^nM)$ is a stable $\ideal{a}$-filtration of $M'$.
\end{thm}
